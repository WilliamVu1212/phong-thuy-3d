:root{--color-red-dark: #8B0000;--color-red: #C41E3A;--color-red-light: #E34234;--color-gold-dark: #B8860B;--color-gold: #FFD700;--color-gold-light: #FFEC8B;--color-kim: #FFFFFF;--color-moc: #228B22;--color-thuy: #1E90FF;--color-hoa: #DC143C;--color-tho: #DAA520;--color-bg-dark: #1a1a2e;--color-bg: #16213e;--color-bg-light: #1f3460;--color-text: #f5f5f5;--color-text-muted: #a0a0a0;--color-border: #3a3a5c;--color-door: #FFD700;--color-living: #4CAF50;--color-bedroom: #9C27B0;--color-kitchen: #FF5722;--color-bathroom: #2196F3;--color-altar: #E91E63;--spacing-xs: 4px;--spacing-sm: 8px;--spacing-md: 16px;--spacing-lg: 24px;--spacing-xl: 32px;--radius-sm: 4px;--radius-md: 8px;--radius-lg: 12px;--radius-full: 50%;--shadow-sm: 0 2px 4px rgba(0,0,0,.3);--shadow-md: 0 4px 8px rgba(0,0,0,.4);--shadow-lg: 0 8px 16px rgba(0,0,0,.5);--transition-fast: .15s ease;--transition-normal: .3s ease;--transition-slow: .5s ease}*,*:before,*:after{box-sizing:border-box;margin:0;padding:0}html,body{height:100%;overflow:hidden}body{font-family:Noto Sans,sans-serif;background:var(--color-bg-dark);color:var(--color-text);line-height:1.5}h1,h2,h3,h4,h5,h6{font-family:"Noto Serif",serif;font-weight:700}#app{display:flex;flex-direction:column;height:100vh;overflow:hidden}.header{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-md) var(--spacing-lg);background:linear-gradient(135deg,var(--color-red-dark),var(--color-red));border-bottom:3px solid var(--color-gold);box-shadow:var(--shadow-md);z-index:100}.logo{display:flex;align-items:center;gap:var(--spacing-md)}.logo-icon{font-size:2.5rem;animation:rotate-yin-yang 10s linear infinite}@keyframes rotate-yin-yang{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.logo h1{font-size:1.5rem;color:var(--color-gold);text-shadow:2px 2px 4px rgba(0,0,0,.5)}.header-actions{display:flex;gap:var(--spacing-md)}.btn{display:inline-flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-sm) var(--spacing-md);font-family:inherit;font-size:.9rem;font-weight:600;border:none;border-radius:var(--radius-md);cursor:pointer;transition:all var(--transition-fast)}.btn-primary{background:linear-gradient(135deg,var(--color-red),var(--color-red-light));color:#fff;border:1px solid var(--color-gold)}.btn-primary:hover{background:linear-gradient(135deg,var(--color-red-light),var(--color-red));transform:translateY(-2px);box-shadow:var(--shadow-md)}.btn-gold{background:linear-gradient(135deg,var(--color-gold-dark),var(--color-gold));color:var(--color-bg-dark)}.btn-gold:hover{background:linear-gradient(135deg,var(--color-gold),var(--color-gold-light));transform:translateY(-2px);box-shadow:var(--shadow-md)}.btn-outline{background:transparent;color:var(--color-gold);border:2px solid var(--color-gold)}.btn-outline:hover{background:var(--color-gold);color:var(--color-bg-dark)}.main-content{display:grid;grid-template-columns:320px 1fr 350px;flex:1;overflow:hidden}.panel{display:flex;flex-direction:column;background:var(--color-bg);border:1px solid var(--color-border);overflow:hidden}.panel-left{border-right:2px solid var(--color-gold-dark)}.panel-right{border-left:2px solid var(--color-gold-dark)}.panel-header{padding:var(--spacing-md);background:linear-gradient(135deg,var(--color-bg-light),var(--color-bg));border-bottom:1px solid var(--color-gold-dark)}.panel-header h2{font-size:1.1rem;color:var(--color-gold)}.panel-content{flex:1;padding:var(--spacing-md);overflow-y:auto}.panel-content::-webkit-scrollbar{width:8px}.panel-content::-webkit-scrollbar-track{background:var(--color-bg-dark)}.panel-content::-webkit-scrollbar-thumb{background:var(--color-gold-dark);border-radius:var(--radius-sm)}.control-group{margin-bottom:var(--spacing-lg)}.control-group label{display:block;margin-bottom:var(--spacing-sm);font-weight:600;color:var(--color-gold);font-size:.9rem}.hint{margin-top:var(--spacing-xs);font-size:.75rem;color:var(--color-text-muted);font-style:italic}.direction-selector{display:grid;grid-template-columns:repeat(3,1fr);gap:var(--spacing-xs);max-width:200px;margin:0 auto}.dir-btn{padding:var(--spacing-sm);font-size:.8rem;font-weight:600;background:var(--color-bg-light);color:var(--color-text);border:1px solid var(--color-border);border-radius:var(--radius-sm);cursor:pointer;transition:all var(--transition-fast)}.dir-btn:nth-child(1){grid-column:2}.dir-btn:nth-child(2){grid-column:3}.dir-btn:nth-child(3){grid-column:3;grid-row:2}.dir-btn:nth-child(4){grid-column:3;grid-row:3}.dir-btn:nth-child(5){grid-column:2;grid-row:3}.dir-btn:nth-child(6){grid-column:1;grid-row:3}.dir-btn:nth-child(7){grid-column:1;grid-row:2}.dir-btn:nth-child(8){grid-column:1}.dir-btn:hover{background:var(--color-gold-dark);color:var(--color-bg-dark)}.dir-btn.active{background:var(--color-gold);color:var(--color-bg-dark);border-color:var(--color-gold);box-shadow:0 0 10px var(--color-gold)}.room-tools{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--spacing-sm)}.room-btn{display:flex;flex-direction:column;align-items:center;gap:var(--spacing-xs);padding:var(--spacing-sm);background:var(--color-bg-light);border:2px solid var(--color-border);border-radius:var(--radius-md);cursor:pointer;transition:all var(--transition-fast)}.room-btn:hover{transform:translateY(-2px);box-shadow:var(--shadow-sm)}.room-btn.active{border-color:var(--color-gold);box-shadow:0 0 10px #ffd7004d}.room-icon{font-size:1.5rem}.room-label{font-size:.7rem;color:var(--color-text-muted)}.room-btn[data-room=door]{border-left:4px solid var(--color-door)}.room-btn[data-room=living]{border-left:4px solid var(--color-living)}.room-btn[data-room=bedroom]{border-left:4px solid var(--color-bedroom)}.room-btn[data-room=kitchen]{border-left:4px solid var(--color-kitchen)}.room-btn[data-room=bathroom]{border-left:4px solid var(--color-bathroom)}.room-btn[data-room=altar]{border-left:4px solid var(--color-altar)}.room-btn[data-room=eraser]{border-left:4px solid var(--color-text-muted)}.floor-plan-grid{display:grid;grid-template-columns:repeat(10,1fr);gap:2px;background:var(--color-border);border:2px solid var(--color-gold-dark);border-radius:var(--radius-md);padding:2px;aspect-ratio:1;-webkit-user-select:none;user-select:none}.grid-cell{aspect-ratio:1;background:var(--color-bg-light);border-radius:2px;cursor:pointer;transition:all var(--transition-fast);display:flex;align-items:center;justify-content:center;font-size:.8rem}.grid-cell:hover{background:var(--color-bg);transform:scale(1.05)}.grid-cell.door{background:var(--color-door)}.grid-cell.living{background:var(--color-living)}.grid-cell.bedroom{background:var(--color-bedroom)}.grid-cell.kitchen{background:var(--color-kitchen)}.grid-cell.bathroom{background:var(--color-bathroom)}.grid-cell.altar{background:var(--color-altar)}.view-3d-container{position:relative;background:linear-gradient(180deg,#0a0a1a,#1a1a3e);overflow:hidden}.three-container{width:100%;height:100%}.three-container canvas{display:block}.view-controls{position:absolute;bottom:var(--spacing-lg);left:50%;transform:translate(-50%);display:flex;gap:var(--spacing-sm);background:#000000b3;padding:var(--spacing-sm);border-radius:var(--radius-lg);border:1px solid var(--color-gold-dark)}.view-btn{width:40px;height:40px;display:flex;align-items:center;justify-content:center;background:var(--color-bg-light);border:1px solid var(--color-border);border-radius:var(--radius-md);cursor:pointer;font-size:1.2rem;transition:all var(--transition-fast)}.view-btn:hover{background:var(--color-gold-dark)}.view-btn.active{background:var(--color-gold);border-color:var(--color-gold)}.compass-container{position:absolute;top:var(--spacing-lg);right:var(--spacing-lg);width:150px;height:150px;background:#00000080;border:2px solid var(--color-gold);border-radius:var(--radius-full);box-shadow:var(--shadow-lg)}.input-group{display:flex;gap:var(--spacing-sm);margin-bottom:var(--spacing-sm)}input[type=number],select{flex:1;padding:var(--spacing-sm) var(--spacing-md);font-family:inherit;font-size:.9rem;background:var(--color-bg-light);color:var(--color-text);border:1px solid var(--color-border);border-radius:var(--radius-md);outline:none;transition:border-color var(--transition-fast)}input[type=number]:focus,select:focus{border-color:var(--color-gold)}.destiny-info{margin-top:var(--spacing-md);animation:fadeIn .5s ease}@keyframes fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.destiny-card{display:flex;align-items:center;gap:var(--spacing-md);padding:var(--spacing-md);background:linear-gradient(135deg,var(--color-bg-light),var(--color-bg));border:2px solid var(--color-gold);border-radius:var(--radius-lg);margin-bottom:var(--spacing-md)}.destiny-symbol{font-size:3rem;color:var(--color-gold);text-shadow:0 0 20px var(--color-gold)}.destiny-details h3{color:var(--color-gold);font-size:1.2rem}.destiny-details p{color:var(--color-text-muted);font-size:.9rem}.directions-grid{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-md)}.direction-section{padding:var(--spacing-sm);border-radius:var(--radius-md)}.direction-section.good{background:#4caf501a;border:1px solid var(--color-living)}.direction-section.bad{background:#f443361a;border:1px solid var(--color-red)}.direction-section h4{font-size:.85rem;margin-bottom:var(--spacing-xs)}.direction-section ul{list-style:none;font-size:.8rem}.direction-section ul li{padding:2px 0}.analysis-results{display:flex;flex-direction:column;gap:var(--spacing-sm)}.analysis-item{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-sm);background:var(--color-bg-light);border-radius:var(--radius-md);font-size:.85rem}.analysis-item.good{border-left:4px solid var(--color-living)}.analysis-item.bad{border-left:4px solid var(--color-red)}.analysis-item.pending{border-left:4px solid var(--color-gold-dark);color:var(--color-text-muted)}.analysis-icon{font-size:1.2rem}.score-container{display:flex;flex-direction:column;align-items:center;padding:var(--spacing-lg)}.score-circle{position:relative;width:120px;height:120px}.score-circle svg{transform:rotate(-90deg)}.score-bg{fill:none;stroke:var(--color-bg-light);stroke-width:8}.score-progress{fill:none;stroke:var(--color-gold);stroke-width:8;stroke-linecap:round;stroke-dasharray:283;stroke-dashoffset:283;transition:stroke-dashoffset 1s ease}.score-value{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center}#score-number{font-size:2rem;font-weight:700;color:var(--color-gold)}.score-label{display:block;font-size:.75rem;color:var(--color-text-muted)}.score-text{margin-top:var(--spacing-sm);font-size:.9rem;color:var(--color-text-muted);text-align:center}.suggestions{background:var(--color-bg-light);border-radius:var(--radius-md);padding:var(--spacing-md);max-height:200px;overflow-y:auto}.suggestions .placeholder{color:var(--color-text-muted);font-size:.85rem;font-style:italic}.suggestion-item{display:flex;align-items:flex-start;gap:var(--spacing-sm);padding:var(--spacing-sm) 0;border-bottom:1px solid var(--color-border);font-size:.85rem}.suggestion-item:last-child{border-bottom:none}.suggestion-icon{flex-shrink:0}.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:#000c;display:flex;align-items:center;justify-content:center;z-index:1000;animation:fadeIn .3s ease}.modal.hidden{display:none}.modal-content{width:90%;max-width:800px;max-height:90vh;background:var(--color-bg);border:2px solid var(--color-gold);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);display:flex;flex-direction:column}.modal-header{display:flex;justify-content:space-between;align-items:center;padding:var(--spacing-md) var(--spacing-lg);background:linear-gradient(135deg,var(--color-red-dark),var(--color-red));border-bottom:2px solid var(--color-gold)}.modal-header h2{color:var(--color-gold)}.modal-close{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:none;border:none;color:var(--color-text);font-size:1.5rem;cursor:pointer;transition:color var(--transition-fast)}.modal-close:hover{color:var(--color-gold)}.modal-body{flex:1;padding:var(--spacing-lg);overflow-y:auto}.modal-footer{display:flex;justify-content:flex-end;gap:var(--spacing-md);padding:var(--spacing-md) var(--spacing-lg);border-top:1px solid var(--color-border)}.report-section{margin-bottom:var(--spacing-lg)}.report-section h3{color:var(--color-gold);margin-bottom:var(--spacing-sm);padding-bottom:var(--spacing-xs);border-bottom:1px solid var(--color-gold-dark)}.report-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--spacing-md)}.report-item{display:flex;justify-content:space-between;padding:var(--spacing-sm);background:var(--color-bg-light);border-radius:var(--radius-sm)}.report-label{color:var(--color-text-muted)}.report-value{font-weight:600}.hidden{display:none!important}@media (max-width: 1200px){.main-content{grid-template-columns:280px 1fr 300px}}@media (max-width: 992px){.main-content{grid-template-columns:1fr;grid-template-rows:auto 1fr auto}.panel-left,.panel-right{border:none}.view-3d-container{min-height:400px}.compass-container{width:100px;height:100px}}@media (max-width: 576px){.header{flex-direction:column;gap:var(--spacing-md)}.room-tools{grid-template-columns:repeat(3,1fr)}.directions-grid{grid-template-columns:1fr}}@media print{body{background:#fff;color:#000}.header,.panel-left,.view-3d-container,.modal-footer{display:none}.modal{position:static;background:none}.modal-content{width:100%;max-width:none;border:none;box-shadow:none}.modal-header{background:none;border-bottom:2px solid black}.modal-header h2{color:#000}}
